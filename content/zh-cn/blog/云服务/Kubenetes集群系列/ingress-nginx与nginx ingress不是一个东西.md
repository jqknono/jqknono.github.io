---
layout: blog
title: ingress-nginx与nginx ingress不是一个东西
linkTitle: ingress-nginx与nginx ingress不是一个东西
published: true
categories: 集群
tags: [集群, Kubenetes集群系列]
date: 2024-06-18 16:39:06 +0800
draft: false
toc: true
toc_hide: false
math: false
comments: false
giscus_comments: true
hide_summary: false
hide_feedback: false
description:
weight: 100
---

看了两周的文档才发现 `Ingress-Nginx` 和 `Nginx Ingress` 不是同一个东西, 两者的功能和实现方式都不一样. 并且还有指导迁移的文档.

- [从 Ingress-NGINX Controller 迁移到 NGINX Ingress Controller](https://docs.nginx.com/nginx-ingress-controller/installation/ingress-nginx/)
- [NGINX Ingress Controller](https://docs.nginx.com/nginx-ingress-controller/)
- [Ingress-NGINX](https://kubernetes.github.io/ingress-nginx/)

`Ingress-NGINX` 是社区版, 参与讨论的人数更多, 搜索到的答案更多. `NGINX Ingress` 是商业版, 功能更多, 但是社区参与度更低.

根据 [Deploy with NGINX Ingress Controller - Overview](https://docs.nginx.com/mesh/tutorials/kic/deploy-with-kic/)

> NGINX Ingress Controller can be used for free with NGINX Open Source. Paying customers have access to NGINX Ingress Controller with NGINX Plus. To deploy NGINX Ingress Controller with NGINX Service Mesh, you must use either:
>
> Open Source NGINX Ingress Controller version 3.0+
> NGINX Plus version of NGINX Ingress Controller
> Visit the NGINX Ingress Controller product page for more information.

NGINX Ingress Controller 可以通过 NGINX Open Source 免费使用. 付费客户可以通过 NGINX Plus 访问 NGINX Ingress Controller.

另外 nginx 的商业版官网已迁移至[www.f5.com](https://www.f5.com/go/product/welcome-to-nginx)

Nginx Ingress Controller 的产品页在[https://www.f5.com/products/nginx/nginx-ingress-controller](https://www.f5.com/products/nginx/nginx-ingress-controller)

![](https://s2.loli.net/2024/06/18/njRBo8r6gUeTF74.png)

这篇 2021.05 的博文对比了它们的区别: [There are two Nginx Ingress Controllers for k8s. What?](https://grigorkh.medium.com/there-are-two-nginx-ingress-controllers-for-k8s-what-44c7b548e678)

| Aspect or Feature                                                             | kubernetes/ingress-nginx                                                                                                             | nginxinc/kubernetes-ingress with NGINX                                                                                                                              | nginxinc/kubernetes-ingress with NGINX Plus                                                                                                                         |
| ----------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Fundamental**                                                               |
| Authors                                                                       | Kubernetes community                                                                                                                 | NGINX Inc and community                                                                                                                                             | NGINX Inc and community                                                                                                                                             |
| NGINX version                                                                 | [Custom](https://github.com/kubernetes/ingress-nginx/tree/master/images/nginx) NGINX build that includes several third-party modules | NGINX official mainline [build](https://github.com/nginxinc/docker-nginx)                                                                                           | NGINX Plus                                                                                                                                                          |
| Commercial support                                                            | N/A                                                                                                                                  | N/A                                                                                                                                                                 | Included                                                                                                                                                            |
| Implemented in                                                                | Go/Lua (while Nginx is written in C)                                                                                                 | Go/Python                                                                                                                                                           | Go/Python                                                                                                                                                           |
| **Load balancing configuration via the Ingress resource**                     |
| Merging Ingress rules with the same host                                      | Supported                                                                                                                            | Supported via [Mergeable Ingresses](../examples/mergeable-ingress-types)                                                                                            | Supported via [Mergeable Ingresses](../examples/mergeable-ingress-types)                                                                                            |
| HTTP load balancing extensions - Annotations                                  | See the [supported annotations](https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/)              | See the [supported annotations](https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/)           | See the [supported annotations](https://docs.nginx.com/nginx-ingress-controller/configuration/ingress-resources/advanced-configuration-with-annotations/)           |
| HTTP load balancing extensions -- ConfigMap                                   | See the [supported ConfigMap keys](https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/configmap/)             | See the [supported ConfigMap keys](https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/configmap-resource/)                          | See the [supported ConfigMap keys](https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/configmap-resource/)                          |
| TCP/UDP                                                                       | Supported via a ConfigMap                                                                                                            | Supported via custom resources                                                                                                                                      | Supported via custom resources                                                                                                                                      |
| Websocket                                                                     | Supported                                                                                                                            | Supported via an [annotation](../examples/websocket)                                                                                                                | Supported via an [annotation](../examples/websocket)                                                                                                                |
| TCP SSL Passthrough                                                           | Supported via a ConfigMap                                                                                                            | Supported via custom resources                                                                                                                                      | Supported via custom resources                                                                                                                                      |
| JWT validation                                                                | Not supported                                                                                                                        | Not supported                                                                                                                                                       | Supported                                                                                                                                                           |
| Session persistence                                                           | Supported via a third-party module                                                                                                   | Not supported                                                                                                                                                       | Supported                                                                                                                                                           |
| Canary testing (by header, cookie, weight)                                    | Supported via annotations                                                                                                            | Supported via custom resources                                                                                                                                      | Supported via custom resources                                                                                                                                      |
| Configuration templates                                                       | See the [template](https://github.com/kubernetes/ingress-nginx/blob/master/rootfs/etc/nginx/template/nginx.tmpl)                     | See the [templates](../internal/configs/version1)                                                                                                                   | See the [templates](../internal/configs/version1)                                                                                                                   |
| **Load balancing configuration via Custom Resources**                         |
| HTTP load balancing                                                           | Not supported                                                                                                                        | See [VirtualServer and VirtualServerRoute](https://docs.nginx.com/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/) resources | See [VirtualServer and VirtualServerRoute](https://docs.nginx.com/nginx-ingress-controller/configuration/virtualserver-and-virtualserverroute-resources/) resources |
| TCP/UDP load balancing                                                        | Not supported                                                                                                                        | See [TransportServer](https://docs.nginx.com/nginx-ingress-controller/configuration/transportserver-resource/) resource                                             | See [TransportServer](https://docs.nginx.com/nginx-ingress-controller/configuration/transportserver-resource/) resource                                             |
| TCP SSL Passthrough load balancing                                            | Not supported                                                                                                                        | See [TransportServer](https://docs.nginx.com/nginx-ingress-controller/configuration/transportserver-resource/) resource                                             | See [TransportServer](https://docs.nginx.com/nginx-ingress-controller/configuration/transportserver-resource/) resource                                             |
| **Deployment**                                                                |
| Command-line arguments                                                        | See the [arguments](https://kubernetes.github.io/ingress-nginx/user-guide/cli-arguments/)                                            | See the [arguments](https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/)                                     | See the [arguments](https://docs.nginx.com/nginx-ingress-controller/configuration/global-configuration/command-line-arguments/)                                     |
| TLS certificate and key for the default server                                | Required as a command-line argument/ auto-generated                                                                                  | Required as a command-line argument                                                                                                                                 | Required as a command-line argument                                                                                                                                 |
| Helm chart                                                                    | Supported                                                                                                                            | Supported                                                                                                                                                           | Supported                                                                                                                                                           |
| Operator                                                                      | Not supported                                                                                                                        | Supported                                                                                                                                                           | Supported                                                                                                                                                           |
| **Operational**                                                               |
| Reporting the IP address(es) of the Ingress controller into Ingress resources | Supported                                                                                                                            | Supported                                                                                                                                                           | Supported                                                                                                                                                           |
| Extended Status                                                               | Supported via a third-party module                                                                                                   | Not supported                                                                                                                                                       | Supported                                                                                                                                                           |
| Prometheus Integration                                                        | Supported                                                                                                                            | Supported                                                                                                                                                           | Supported                                                                                                                                                           |
| Dynamic reconfiguration of endpoints (no configuration reloading)             | Supported with a third-party Lua module                                                                                              | Not supported                                                                                                                                                       | Supported                                                                                                                                                           |
